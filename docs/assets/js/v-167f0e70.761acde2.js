(self.webpackChunkblog_vuepress=self.webpackChunkblog_vuepress||[]).push([[307],{7987:(t,d,e)=>{"use strict";e.r(d),e.d(d,{data:()=>l});const l={key:"v-167f0e70",path:"/backend/normalization.html",title:"資料庫正規化",lang:"zh-tw",frontmatter:{},excerpt:"",headers:[{level:2,title:"我們換個方式來學習",slug:"我們換個方式來學習",children:[]},{level:2,title:"不好的設計會導致 異常狀況(Anomaly)",slug:"不好的設計會導致-異常狀況-anomaly",children:[]},{level:2,title:"工程師很懶的",slug:"工程師很懶的",children:[]},{level:2,title:"1NF 一階正規化",slug:"_1nf-一階正規化",children:[]},{level:2,title:"2NF 二階正規化",slug:"_2nf-二階正規化",children:[]},{level:2,title:"3NF 三階正規化",slug:"_3nf-三階正規化",children:[]},{level:2,title:"其他正規化 有興趣可以搜尋",slug:"其他正規化-有興趣可以搜尋",children:[]},{level:2,title:"參考資料",slug:"參考資料",children:[]}],filePathRelative:"backend/normalization.md",git:{updatedTime:1721658207e3,contributors:[{name:"Richard Lin",email:"33016870+dpes8693@users.noreply.github.com",commits:2},{name:"google-fb",email:"3a517117@gmail.com",commits:1}]}}},6947:(t,d,e)=>{"use strict";e.r(d),e.d(d,{default:()=>f});var l=e(6252);const r=(0,l.Wm)("h1",{id:"資料庫正規化"},[(0,l.Wm)("a",{class:"header-anchor",href:"#資料庫正規化"},"#"),(0,l.Uk)(" 資料庫正規化")],-1),h=(0,l.Uk)("可參考這篇"),a={href:"http://cc.cust.edu.tw/~ccchen/doc/db_04.pdf",target:"_blank",rel:"noopener noreferrer"},i=(0,l.Uk)("PPT"),o=(0,l.Uk)("，若讀起來很吃力就先往下看吧~"),n=(0,l.uE)('<ul><li>資料庫正規化(Database Normalization)</li></ul><p>這篇主要是面相給初學者，所以覺得很冗長是正常的!我認為這塊用逆向思維來學比較容易記住。</p><ul><li>Normal Form 簡稱 NF</li></ul><p>一些課本開頭都說正規化有什麼好處 blablabla，但對於第一次學的人沒什麼感覺(心理 OS: 喔是喔~然後下個月就忘記了)</p><h2 id="我們換個方式來學習"><a class="header-anchor" href="#我們換個方式來學習">#</a> 我們換個方式來學習</h2><ul><li>這邊有一個表格<code>HOLO生課程資料</code>，請試著幫我將 PHP 學分改成<code>3學分</code></li></ul><table><thead><tr><th>學號</th><th>姓名</th><th>性別</th><th>課程名稱</th><th>學分</th><th>必選修</th><th>成績</th><th>老師姓名</th></tr></thead><tbody><tr><td>S3A517001</td><td>Gura</td><td>女</td><td>PHP,JS</td><td>2,3</td><td>必,必</td><td>74,59</td><td>阿錢,阿許</td></tr><tr><td>S3A517002</td><td>Ina</td><td>女</td><td>PHP,UI/UX</td><td>2,2</td><td>必,選</td><td>88,80</td><td>阿錢,阿陳</td></tr></tbody></table><blockquote><p>You: 這很簡單啊 改 2 筆就好</p></blockquote><ul><li><p>那如果今天有 300 筆呢?1000 筆呢?改起來要花幾分鐘呢?</p></li><li><p>再換一個問題幫我新增一個課程 <code>jQuery 2學分 必修</code></p></li></ul><blockquote><p>You: 好了!</p></blockquote><table><thead><tr><th>學號</th><th>姓名</th><th>性別</th><th>課程名稱</th><th>學分</th><th>必選修</th><th>成績</th><th>老師姓名</th></tr></thead><tbody><tr><td>NULL</td><td>NULL</td><td>NULL</td><td>jQuery</td><td>2</td><td>必修</td><td>NULL</td><td>NULL</td></tr></tbody></table><p><s>沒給我學生和其他資料 新增個毛線阿</s> 這看起來很奇怪對吧!因為資料都黏在一起(耦合太強)。</p><h2 id="不好的設計會導致-異常狀況-anomaly"><a class="header-anchor" href="#不好的設計會導致-異常狀況-anomaly">#</a> 不好的設計會導致 異常狀況(Anomaly)</h2><ul><li>更新異常 ex 改 PHP 學分 2=&gt;3 要改很多筆資料</li><li>插入異常 ex 只想新增 jQuery 課程發現缺一堆資料</li><li>刪除異常 ex 刪除一位學生 成績記錄就沒了</li></ul><h2 id="工程師很懶的"><a class="header-anchor" href="#工程師很懶的">#</a> 工程師很懶的</h2><p>我們想設計好維護的表(Table)透過上面的例子應該會發現一件事--那就是應該分類!</p><p>若將表拆成很細，最後透過電腦組合起來就好了，這也是正規化在做的事情。</p><p>不要死記，用理解的，痛過才會花時間找方法精進。</p><hr><h2 id="_1nf-一階正規化"><a class="header-anchor" href="#_1nf-一階正規化">#</a> 1NF 一階正規化</h2><ul><li>單欄位不能有 2 筆以上的資料，即單一值(Atomic)</li><li>每筆資料不能重複(完全一樣)</li><li>資料要有主鍵(PK)</li></ul><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>把多資料拆掉，雖然資料變多但是更清楚了</p></div><table><thead><tr><th>學號</th><th>姓名</th><th>性別</th><th>課程名稱</th><th>學分</th><th>必選修</th><th>成績</th><th>老師姓名</th></tr></thead><tbody><tr><td>S3A517001</td><td>Gura</td><td>女</td><td>PHP</td><td>2</td><td>必修</td><td>74</td><td>阿錢</td></tr><tr><td>S3A517001</td><td>Gura</td><td>女</td><td>JS</td><td>3</td><td>必修</td><td>59</td><td>阿許</td></tr><tr><td>S3A517002</td><td>Ina</td><td>女</td><td>PHP</td><td>2</td><td>必修</td><td>88</td><td>阿錢</td></tr><tr><td>S3A517002</td><td>Ina</td><td>女</td><td>UI/UX</td><td>2</td><td>選修</td><td>80</td><td>阿陳</td></tr></tbody></table><details open><summary>[收合/展開] PK FK 是?</summary><ul><li>PK (Primary Key) 中文:主鍵 <ul><li>就是唯一值例如身分證字號，學號都只會有一個，這樣就不會找錯人</li></ul></li><li>FK (Foreign Key) 中文:外鍵 <ul><li>可以先記成一個代號，透過這個代號可以取得很多相關的資料</li></ul></li></ul><p>範例如下</p><table><thead><tr><th>PK=蝦皮訂單 id</th><th>FK=下單帳號</th><th>日期</th><th>數量</th><th>物品</th><th>單價</th></tr></thead><tbody><tr><td>1</td><td>dpes8693</td><td>1997/12/07</td><td>2</td><td>PS5</td><td>20000</td></tr><tr><td>2</td><td>hentai123</td><td>2022/05/01</td><td>1</td><td>PS4</td><td>10000</td></tr></tbody></table><table><thead><tr><th>PK=帳號</th><th>名稱</th><th>信箱</th></tr></thead><tbody><tr><td>dpes8693</td><td>Richard</td><td>dpes8693@gmail.com</td></tr><tr><td>hentai123</td><td>態變太</td><td>hentai123@gmail.com</td></tr></tbody></table></details><h2 id="_2nf-二階正規化"><a class="header-anchor" href="#_2nf-二階正規化">#</a> 2NF 二階正規化</h2><ul><li>符合 1NF</li><li>將部分相依的資料拆分出去(分類分起來)</li></ul><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>先把<code>學生</code>拆出來</p></div><table><thead><tr><th>學號</th><th>姓名</th><th>性別</th></tr></thead><tbody><tr><td>S3A517001</td><td>Gura</td><td>女</td></tr><tr><td>S3A517002</td><td>Ina</td><td>女</td></tr></tbody></table><table><thead><tr><th>課程名稱</th><th>學分</th><th>必選修</th><th>成績</th><th>老師姓名</th></tr></thead><tbody><tr><td>PHP</td><td>2</td><td>必修</td><td>74</td><td>阿錢</td></tr><tr><td>JS</td><td>3</td><td>必修</td><td>59</td><td>阿許</td></tr><tr><td>PHP</td><td>2</td><td>必修</td><td>88</td><td>阿錢</td></tr><tr><td>UI/UX</td><td>2</td><td>選修</td><td>80</td><td>阿陳</td></tr></tbody></table><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>之後再拆 <code>課程</code> <code>成績</code> 變成三部分(課程補上編號)</p></div><table><thead><tr><th>課程編號</th><th>課程名稱</th><th>學分</th><th>必選修</th><th>老師姓名</th></tr></thead><tbody><tr><td>C001</td><td>PHP</td><td>2</td><td>必修</td><td>阿錢</td></tr><tr><td>C002</td><td>JS</td><td>3</td><td>必修</td><td>阿許</td></tr><tr><td>C001</td><td>PHP</td><td>2</td><td>必修</td><td>阿錢</td></tr><tr><td>A001</td><td>UI/UX</td><td>2</td><td>選修</td><td>阿陳</td></tr></tbody></table><table><thead><tr><th>學號</th><th>課程編號</th><th>成績</th></tr></thead><tbody><tr><td>S3A517001</td><td>C001</td><td>74</td></tr><tr><td>S3A517001</td><td>C002</td><td>59</td></tr><tr><td>S3A517002</td><td>C001</td><td>88</td></tr><tr><td>S3A517002</td><td>A001</td><td>80</td></tr></tbody></table><details open><summary>[收合/展開] 相依有幾種?</summary><ul><li>完全相依</li><li>部分相依</li><li>遞移相依(間接相依)</li></ul><p>很暴力的解說[相依]: 沒有它就廢掉了，因為無法辨別... 怎麼說呢?</p><p>EX: ID | NAME | TEL. 01 | JACK | 0911111111 02 | JACK | 0922222222 請你把 ID 這列遮起來，告訴我 JACK 的電話是幾號 無法辨別 因為有 2 個人 所以需要 PK</p></details><h2 id="_3nf-三階正規化"><a class="header-anchor" href="#_3nf-三階正規化">#</a> 3NF 三階正規化</h2><ul><li>符合 2NF</li><li>各欄位與 PK 沒有遞移相依</li></ul><table><thead><tr><th>課程編號</th><th>課程名稱</th><th>學分</th><th>必選修</th><th>老師姓名</th><th>老師編號</th></tr></thead><tbody><tr><td>C001</td><td>PHP</td><td>2</td><td>必修</td><td>阿錢</td><td>T002</td></tr><tr><td>C002</td><td>JS</td><td>3</td><td>必修</td><td>阿許</td><td>T001</td></tr><tr><td>C001</td><td>PHP</td><td>2</td><td>必修</td><td>阿錢</td><td>T002</td></tr><tr><td>A001</td><td>UI/UX</td><td>2</td><td>選修</td><td>阿陳</td><td>T003</td></tr></tbody></table><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>加入<code>老師編號</code>後 發現 <code>老師姓名</code> 有遞移關係，應該將老師抽出來，未來比較好擴充</p></div><table><thead><tr><th>課程編號</th><th>課程名稱</th><th>學分</th><th>必選修</th><th>老師編號</th></tr></thead><tbody><tr><td>C001</td><td>PHP</td><td>2</td><td>必修</td><td>T002</td></tr><tr><td>C002</td><td>JS</td><td>3</td><td>必修</td><td>T001</td></tr><tr><td>C001</td><td>PHP</td><td>2</td><td>必修</td><td>T002</td></tr><tr><td>A001</td><td>UI/UX</td><td>2</td><td>選修</td><td>T003</td></tr></tbody></table><table><thead><tr><th>老師編號</th><th>老師姓名</th></tr></thead><tbody><tr><td>T002</td><td>阿錢</td></tr><tr><td>T001</td><td>阿許</td></tr><tr><td>T002</td><td>阿錢</td></tr><tr><td>T003</td><td>阿陳</td></tr></tbody></table><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>從原本的 1 張表 拆成 4 張表 擴充性大幅提升! 回到上面問的 2 個問題</p><ul><li>請試著幫我將 PHP 學分改成<code>3學分</code></li><li>幫我新增一個課程 <code>jQuery 2學分 必修</code></li></ul><p>是不是都只要改一次就好了呢?</p></div><p><img src="https://drive.google.com/thumbnail?id=1CkGb1GdJpKv-kv736Ws-0ePhruRb8I8u&amp;sz=w1366" alt="完成比較圖"></p><h2 id="其他正規化-有興趣可以搜尋"><a class="header-anchor" href="#其他正規化-有興趣可以搜尋">#</a> 其他正規化 有興趣可以搜尋</h2><ul><li>4NF</li><li>5NF</li><li>BCNF</li></ul><h2 id="參考資料"><a class="header-anchor" href="#參考資料">#</a> 參考資料</h2>',44),c={href:"https://stackoverflow.com/questions/48191228/is-erd-considered-a-kind-of-uml-diagram",target:"_blank",rel:"noopener noreferrer"},s=(0,l.Uk)("Is ERD considered a kind of UML diagram?"),u={href:"https://www.twblogs.net/a/5db3328ebd9eee310da02e92",target:"_blank",rel:"noopener noreferrer"},p=(0,l.Uk)("ERD img example"),b={href:"https://codertw.com/%E8%B3%87%E6%96%99%E5%BA%AB/123167/",target:"_blank",rel:"noopener noreferrer"},m=(0,l.Uk)("資料庫設計筆記"),P={href:"https://notes.andywu.tw/2018/%E8%B3%87%E6%96%99%E5%BA%AB-%E9%97%9C%E8%81%AF%E4%BB%8B%E7%B4%B9-%E4%B8%80%E5%B0%8D%E4%B8%80%E3%80%81%E4%B8%80%E5%B0%8D%E5%A4%9A%E3%80%81%E5%A4%9A%E5%B0%8D%E5%A4%9A/",target:"_blank",rel:"noopener noreferrer"},y=(0,l.Uk)("[資料庫] 關聯介紹 一對一、一對多、多對多"),f={render:function(t,d){const e=(0,l.up)("OutboundLink");return(0,l.wg)(),(0,l.j4)(l.HY,null,[r,(0,l.Wm)("p",null,[h,(0,l.Wm)("a",a,[i,(0,l.Wm)(e)]),o]),n,(0,l.Wm)("p",null,[(0,l.Wm)("a",c,[s,(0,l.Wm)(e)])]),(0,l.Wm)("p",null,[(0,l.Wm)("a",u,[p,(0,l.Wm)(e)])]),(0,l.Wm)("p",null,[(0,l.Wm)("a",b,[m,(0,l.Wm)(e)])]),(0,l.Wm)("p",null,[(0,l.Wm)("a",P,[y,(0,l.Wm)(e)])])],64)}}}}]);